# ----- System -----
# Set zsh as default shell
set -g default-shell /bin/zsh

set -g status-keys vi	# set vi as the default editor
setw -g mouse on		# enable mouse
set -sg escape-time 0	# no delay for escape key press
set -g history-limit 10000

# ----- Theme -----
set -g default-terminal "screen-256color"

# ----- Display -----
set -g base-index 1				# window number starts at 1
setw -g pane-base-index 1		# pane number starts at 1
set -g set-titles on			# set terminal title
setw -g automatic-rename on		# rename window to reflect current program
set -g display-panes-time 800	# slightly longer pane indicators display time
set -g display-time 1000		# slightly longer status messages display time
set -g status-interval 10		# redraw status line every 10 seconds

# activity
set -g monitor-activity on
set -g visual-activity off

# ----- Key Bindings -----
# Re-map prefix from 'Ctrl-b' to 'Ctrl-a'
# Combine this with `Caps lock to Ctrl`
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Ctrl + r to reload configuration file
bind r source-file ~/.tmux.conf \; display â€‹"Tmux config reloaded."

# Use - and | to split windows
unbind '"'
unbind %
bind - split-window -h -c "#{pane_current_path}"	# prefix + Ctrl + -: split horizontally
bind | split-window -v -c "#{pane_current_path}"	# prefix + Ctrl + |: split vertically

# Window navigation
unbind n
unbind p
bind -r C-h previous-window                             # prefix + Ctrl + h: select previous window
bind -r C-l next-window                                 # prefix + Ctrl + l: select next window
bind -r C-S-h swap-window -t -1 \; select-window -t -1  # swap current window with the previous one
bind -r C-S-l swap-window -t +1 \; select-window -t +1  # swap current window with the next one
bind Tab last-window                                    # move to last active window

# Pane selection
bind h select-pane -L	# prefix + h: select pane on the left
bind j select-pane -D	# prefix + j: select pane on the down
bind k select-pane -U	# prefix + k: select pane on the up
bind l select-pane -R	# prefix + l: select pane on the right
bind > swap-pane -D		# prefix + >: swap current pane with the next one
bind < swap-pane -U		# prefix + <: swap current pane with the previous one

# Pane resizing
bind H resize-pane -L 5		# prefix + Ctrl + H: resize pane towards left
bind J resize-pane -D 5		# prefix + Ctrl + J: resize pane towards down
bind K resize-pane -U 5		# prefix + Ctrl + K: resize pane towards up
bind L resize-pane -R 5		# prefix + Ctrl + L: resize pane towards right

# More fine-grained pane resizing
# I don't really use these but it's pretty common
bind M-h resize-pane -L		# prefix + Meta(or alt) + h: resize left
bind M-j resize-pane -D		# prefix + Meta(or alt) + j: resize down
bind M-k resize-pane -U		# prefix + Meta(or alt) + k: resize up
bind M-l resize-pane -R		# prefix + Meta(or alt) + l: resize right

# F12 key toggle tmux listening on and off
bind -T root F12  \
  set prefix None \;\
  set key-table off \;\
  if -F '#{pane_in_mode}' 'send-keys -X cancel' \;\
  refresh-client -S \;\

bind -T off F12 \
  set -u prefix \;\
  set -u key-table \;\
  refresh-client -S

# Copy & pasting
# 1. prefix + [: enter copy mode
# 2. `hjkl` to navigate
# 3. v: start select just like in vim
# 4. `hjkl` to navigate
# 5. y: copy text and exit copy mode
# Note: q to quit copy mode without copying
setw -g mode-keys vi			# Use vim keybinding in copy mode
unbind -T copy-mode-vi Space	# default for begin-selection
unbind -T copy-mode-vi Enter	# default for copy-selection
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"

############### Plugins ###############
# Use prefix + I to install the plugins if you have TPM installed
# prefix + U to update
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'

# o: open highlighted selection
# Ctrl + o: open with editor
# Shift + s: open with search engine
set -g @plugin 'tmux-plugins/tmux-open'

# Optional: tmux Nord theme
# set -g @plugin "arcticicestudio/nord-tmux"

# Plugin properties
set -g @continuum-restore 'on'

run '~/.tmux/plugins/tpm/tpm'

